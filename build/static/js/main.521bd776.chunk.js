(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{41:function(e,t,c){},44:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(0),r=c.n(s),i=c(14),a=c.n(i),o=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,46)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),s(e),r(e),i(e)}))},l=c(3),j=c(10),d=c(7),u=c(13),b=c.n(u),O=c(16),h=c(15),m=c(29);function x(e){var t=e.children,c=Object(m.a)(e,["children"]);return Object(n.jsx)("td",Object(h.a)(Object(h.a)({},c),{},{className:"border p-2 text-center",children:t}))}function f(e){var t=e.children,c=e.color,s=void 0===c?"#aaa":c;return Object(n.jsx)("tr",{style:{background:s},children:t})}function p(e){var t=e.id,c=e.title,r=e.description,i=e.onDelete,a=e.onEdit,o=Object(s.useState)(!1),d=Object(l.a)(o,2),u=d[0],b=d[1];return Object(n.jsx)(s.Fragment,{children:Object(n.jsxs)(f,{color:"#eee",children:[Object(n.jsx)(x,{children:Object(n.jsx)(j.b,{to:"/post?id=".concat(+t),children:t})}),Object(n.jsx)(x,{children:c}),Object(n.jsx)(x,{children:r}),Object(n.jsx)(x,{onClick:a,children:"edit"}),Object(n.jsx)(x,{onClick:i,children:"delete"}),Object(n.jsx)(x,{onClick:function(){return b(!u)},children:u?"Unlike":"Like"})]})})}function v(){return Object(n.jsx)("thead",{children:Object(n.jsxs)(f,{children:[Object(n.jsx)(x,{children:"Id"}),Object(n.jsx)(x,{children:"Title"}),Object(n.jsx)(x,{children:"Description"}),Object(n.jsx)(x,{children:"Action"}),Object(n.jsx)(x,{children:"Action"}),Object(n.jsx)(x,{children:"Action"})]})})}function g(e){var t=e.num,c=e.onClick;return Object(n.jsx)("li",{className:"page-item ",children:Object(n.jsx)("button",{className:"page-link bg-dark text-light",onClick:c,children:t})})}var y=function(e){for(var t=e.postPerPage,c=e.totalPosts,s=e.paginate,r=e.increasePosts,i=e.decreasePosts,a=[],o=1;o<=Math.ceil(c/t);o++)a.push(o);return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-4",children:[Object(n.jsx)("button",{className:"btn btn-primary m-1",onClick:function(){r(3)},children:"+3"}),Object(n.jsx)("button",{className:"btn btn-primary m-1",onClick:function(){i(3)},children:"-3"})]}),Object(n.jsx)("div",{className:"col-8",children:Object(n.jsx)("ul",{className:"pagination p-3 m-1 ",children:a.map((function(e){return Object(n.jsx)(g,{num:e,onClick:function(){return s(e)}},e)}))})})]})})};function S(e){var t=e.title,c=e.helperText,s=e.children;return Object(n.jsx)("div",{className:"jumbotron jumbotron-fluid p-3",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"display-4",children:t}),Object(n.jsx)("p",{className:"lead",children:c}),s]})})}var N=c(6);c(41);function I(){return Object(n.jsx)("div",{class:"lds-hourglass"})}function w(e){var t=e.title,c=e.children;return Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col",children:Object(n.jsx)("label",{htmlFor:t,className:"label p-1",children:t})})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col",children:c})})]})}var P=c(20),k=function(){if(void 0==typeof window)return!1;if(localStorage.getItem("userId")){var e=JSON.parse(localStorage.getItem("userId"));return e>0&&e<11&&(console.log(e),e)}return!1},C=function(e,t){return Math.floor(Math.random()*(t-e)+e)};c(42);function D(e){var t=e.ShowHide,c=e.onCloseModal,r=e.onSubmit,i=e.title,a=void 0===i?"":i,o=e.userId,j=e.body,d=void 0===j?"":j,u=Object(s.useState)(""),b=Object(l.a)(u,2),O=b[0],h=b[1],m=Object(s.useState)(""),x=Object(l.a)(m,2),f=x[0],p=x[1];return Object(s.useEffect)((function(){a&&d&&(h(a),p(d))}),[a,d]),Object(n.jsxs)(P.a,{show:t,onHide:c,children:[Object(n.jsx)(P.a.Header,{children:"Make A Post"}),Object(n.jsx)(P.a.Body,{children:Object(n.jsxs)("form",{onSubmit:function(e){r(e,{title:O,body:f,id:C(500,1e3),userId:o}),p(""),h("")},children:[Object(n.jsx)(w,{title:"Title",children:Object(n.jsx)("input",{className:"form-control",type:"text",placeholder:"Title",value:O,onChange:function(e){return h(e.target.value)},id:"Title"})}),Object(n.jsx)(w,{title:"Body",children:Object(n.jsx)("input",{required:!0,id:"Body",className:"form-control",type:"text",placeholder:"Body",value:f,onChange:function(e){return p(e.target.value)}})}),Object(n.jsx)(w,{title:"Body",children:Object(n.jsx)("input",{required:!0,className:"btn btn-primary btn-block",type:"submit",value:"Post"})})]})})]})}function E(e){var t=e.ShowModal,c=void 0!==t&&t,r=e.onCloseModal,i=e.userId,a=void 0===i?null:i,o=e.title,j=void 0===o?"Posts":o,d=Object(s.useState)(!1),u=Object(l.a)(d,2),h=u[0],m=u[1],x=Object(s.useState)([]),f=Object(l.a)(x,2),g=f[0],w=f[1],P=Object(s.useState)(!0),k=Object(l.a)(P,2),C=k[0],E=k[1],T=Object(s.useState)(1),F=Object(l.a)(T,2),M=F[0],A=F[1],L=Object(s.useState)(5),B=Object(l.a)(L,2),H=B[0],R=B[1],q=Object(s.useState)(""),U=Object(l.a)(q,1)[0],_=Object(s.useState)(""),G=Object(l.a)(_,1)[0],J=M*H,W=J-H,Y=g.slice(W,J),z=Object(N.c)((function(e){return e.posts.posts}));return Object(s.useEffect)((function(){m(c),E(!0),function(){var e=Object(O.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a?(t=z.filter((function(e){return e.userId===+a})),w(t),E(!1)):(w(z),E(!1));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[z,h,c,a]),C?Object(n.jsx)(I,{}):Object(n.jsxs)("div",{children:[Object(n.jsx)(S,{title:j}),Object(n.jsxs)("table",{className:a?"":"m-3",children:[Object(n.jsx)(v,{}),Object(n.jsx)("tbody",{children:Y.map((function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(p,{onEdit:function(){},description:e.body,id:e.id,title:e.title,onDelete:function(){w((function(){return g.filter((function(t){return t.id!==e.id}))})),alert("Deleted Successfully")}},e.id)})}))})]}),Object(n.jsx)(y,{postPerPage:H,totalPosts:g.length,paginate:function(e){A(e)},increasePosts:function(e){return R(H+ +e)},decreasePosts:function(e){return R(H-+e)}}),Object(n.jsx)(D,{ShowHide:h,onCloseModal:r,userId:a,onSubmit:function(e,t){e.preventDefault();var c=g;console.log("OLD",c),c.push({title:t.title,body:t.body,id:t.id,userId:t.userId}),console.log("NEW",{title:t.title,body:t.body,id:t.id,userId:t.userId}),w(c),r(),m(!1)},body:G,title:U})]})}var T="REGISTER",F="LOGIN",M="LOGOUT",A="FETCH_USER",L=function(e,t){localStorage.setItem("email",e),localStorage.setItem("userId",t)},B=function(e){var t=e.email;return function(e){var c=Math.floor(10*Math.random())+1;return L(t,c),console.log(t,c),window.location.href="/dashboard",e({type:T,email:t,userId:c})}},H=function(){return function(e){if(!k())return e({type:A,userId:null,email:null});var t=localStorage.getItem("userId"),c=localStorage.getItem("email");e({type:A,userId:t,email:c})}};function R(){var e=Object(N.b)(),t=Object(s.useState)(!1),c=Object(l.a)(t,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){i(k())}),[]),Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark nav-fill shadow",children:[Object(n.jsx)(j.b,{to:"/",className:"navbar-brand",children:Object(n.jsx)("b",{children:"Home"})}),r?Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)(j.c,{className:"navbar-text",to:"/dashboard",children:"Dashboard"}),Object(n.jsx)("button",{onClick:function(){localStorage.clear(),e({type:M}),window.location.href="/"},className:"btn btn-danger mx-3",to:"/dashboard",children:"Logout"})]}):Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)(j.c,{className:"navbar-text m-1",to:"/register",children:"Register"}),Object(n.jsx)(j.c,{className:"navbar-text m-1",to:"/login",children:"Login"})]})]})}function q(e){var t=e.isAuth;return Object(n.jsxs)("div",{children:[Object(n.jsx)(R,{isAuth:t}),Object(n.jsx)(E,{title:"My Posts",userId:null})]})}function U(e){var t=e.onSubmit,c=e.title,r=(e.userType,Object(s.useState)("")),i=Object(l.a)(r,2),a=i[0],o=i[1],j=Object(s.useState)(""),d=Object(l.a)(j,2),u=d[0],b=d[1],O=function(e){e.preventDefault(),a&&u&&t({email:a,password:u})};return Object(n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},children:Object(n.jsxs)("form",{className:"shadow p-4 bg-dark text-light rounded",onSubmit:function(e){return O(e)},children:[Object(n.jsx)("h3",{className:"py-3",style:{textAlign:"center"},children:c}),Object(n.jsx)(w,{title:"Email",children:Object(n.jsx)("input",{id:"Email",type:"email",minLength:8,maxLength:32,value:a,onChange:function(e){o(e.target.value)},placeholder:"Email",required:!0,className:"form-control"})}),Object(n.jsx)(w,{title:"Password",children:Object(n.jsx)("input",{className:"form-control",id:"Password",required:!0,min:6,max:32,type:"password",value:u,onChange:function(e){b(e.target.value)},placeholder:"Password"})}),Object(n.jsx)(w,{children:Object(n.jsx)("input",{className:"btn btn-primary p-2 my-2 btn-block form-control",type:"submit",value:"Submit"})})]})})}function _(){var e=Object(N.b)();return Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)(R,{}),Object(n.jsx)(U,{title:"Login",onSubmit:function(t){e(B(t))}})]})}function G(){var e=Object(N.b)();return Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)(R,{}),Object(n.jsx)(U,{title:"Register",onSubmit:function(t){e(B(t))}})]})}function J(e){var t=e.postId,c=e.name,s=e.body,r=e.email,i=e.id,a=e.onDelete;return Object(n.jsxs)(f,{color:"#eee",children:[Object(n.jsx)(x,{children:i}),Object(n.jsx)(x,{children:t}),Object(n.jsx)(x,{children:r}),Object(n.jsx)(x,{children:c}),Object(n.jsx)(x,{children:s}),Object(n.jsx)(x,{onClick:a,children:"Delete"})]})}function W(){return Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)(f,{children:[Object(n.jsx)(x,{children:"Id"}),Object(n.jsx)(x,{children:"Post Id"}),Object(n.jsx)(x,{children:"Email"}),Object(n.jsx)(x,{children:"Title"}),Object(n.jsx)(x,{children:"Description"}),Object(n.jsx)(x,{children:"Action"})]})})}var Y="FETCH_POSTS",z="SET_POSTS",K="SET_COMMENTS",Q=function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var c,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://jsonplaceholder.typicode.com/comments");case 3:if((c=e.sent).ok){e.next=6;break}throw new Error("Something went wrong!");case 6:return e.next=8,c.json();case 8:n=e.sent,t({type:K,comments:n}),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()};function V(e){var t=e.title,c=void 0===t?"Comments":t,r=Object(N.b)(),i=Object(s.useState)([]),a=Object(l.a)(i,2),o=a[0],j=a[1],d=Object(s.useState)(!0),u=Object(l.a)(d,2),b=u[0],O=u[1],h=Object(s.useState)(1),m=Object(l.a)(h,2),x=m[0],f=m[1],p=Object(s.useState)(5),v=Object(l.a)(p,2),g=v[0],w=v[1],P=x*g,k=P-g,C=o.slice(k,P),D=Object(N.c)((function(e){return e.posts.posts})),E=Object(N.c)((function(e){return e.posts.comments}));return r(Q()),Object(s.useEffect)((function(){var e=D.map((function(e){return e.id})),t=E.filter((function(t){return e.includes(t.postId)}));j(t),O(!1)}),[r,D,E]),b?Object(n.jsx)(I,{}):Object(n.jsxs)("div",{children:[Object(n.jsx)(S,{title:c}),Object(n.jsx)("div",{children:Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)(W,{}),Object(n.jsx)("tbody",{children:C.map((function(e){var t=e.body,c=e.email,s=e.name,r=e.postId,i=e.id;return Object(n.jsx)(J,{body:t,email:c,name:s,postId:r,id:i,onDelete:function(){j((function(){return o.filter((function(e){return e.id!==i}))})),alert("Deleted Successfully")}},i)}))})]})}),Object(n.jsx)(y,{postPerPage:g,totalPosts:o.length,paginate:function(e){f(e)},increasePosts:function(e){return w(g+ +e)},decreasePosts:function(e){return w(g-+e)}})]})}function X(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),c=t[0],r=t[1],i=Object(N.c)((function(e){return e.auth.userId}));return Object(n.jsxs)("div",{children:[Object(n.jsx)(R,{}),Object(n.jsx)(S,{title:"Dashboard",children:Object(n.jsx)("button",{onClick:function(){console.log("click"),r(!0)},className:"btn btn-primary m-1",children:"Create Post"})}),Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-5",children:Object(n.jsx)(E,{title:"My Posts",userId:i,ShowModal:c,onCloseModal:function(){r(!1)}})}),Object(n.jsx)("div",{className:"col-7",children:Object(n.jsx)(V,{title:"Comments On Your Posts"})})]})})]})}function Z(e){var t=e.postId,c=e.onCommentsSubmit,r=Object(s.useState)([]),i=Object(l.a)(r,2),a=i[0],o=i[1],j=Object(s.useState)(""),d=Object(l.a)(j,2),u=d[0],b=d[1],O=Object(s.useState)(""),h=Object(l.a)(O,2),m=h[0],x=h[1],f=Object(s.useState)(Object(N.c)((function(e){return e.auth.email}))),p=Object(l.a)(f,1)[0];return Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-5",children:Object(n.jsxs)("form",{className:"shadow p-3 mb-5 mx-3",onSubmit:function(e){e.preventDefault(),c(a),o([])},children:[Object(n.jsx)(S,{title:"Enter Comments"}),Object(n.jsx)(w,{title:"Title",children:Object(n.jsx)("input",{className:"form-control",id:"Title",type:"text",onChange:function(e){return b(e.target.value)},placeholder:"Title",value:u})}),Object(n.jsx)(w,{title:"Body",children:Object(n.jsx)("input",{className:"form-control",id:"Body",placeholder:"Body",type:"text",onChange:function(e){return x(e.target.value)},value:m})}),Object(n.jsxs)(w,{children:[Object(n.jsx)("button",{className:"btn btn-primary m-1 btn-block",onClick:function(e){if(e.preventDefault(),m||u){var c={postId:t,id:C(501,1e3),name:u,body:m,email:p},n=a;n.push(c),o(n),x(""),b("")}else alert("FIll Both Fields")},children:"One More +"}),Object(n.jsx)("input",{className:"btn btn-success btn-block m-1",value:"Comment",type:"submit"})]})]})}),Object(n.jsx)("div",{className:"col-7",children:!!a.length&&Object(n.jsxs)("table",{children:[Object(n.jsx)(W,{}),a.map((function(e){return Object(n.jsx)(J,{body:e.body,email:e.email,id:e.id,name:e.name,onDelete:function(){return o(a.filter((function(t){return t.id!==e.id})))},postId:e.postId})}))]})})]})})}function $(e){var t=e.title,c=e.body;return Object(n.jsxs)("div",{className:"card m-2 p-3 shadow",style:{width:"90%"},children:[Object(n.jsx)(S,{title:"Post",helperText:"Do Comment and share"}),Object(n.jsx)("h5",{className:"card-title",children:t}),Object(n.jsx)("p",{className:"card-text",children:c})]})}function ee(e){var t=e.id,c=Object(N.b)(),r=Object(s.useState)({}),i=Object(l.a)(r,2),a=i[0],o=i[1],j=Object(s.useState)([]),d=Object(l.a)(j,2),u=d[0],b=d[1],O=Object(s.useState)(!0),h=Object(l.a)(O,2),m=h[0],x=h[1],f=Object(N.c)((function(e){return e.posts})),p=f.posts,v=f.comments;c(Q()),c(H()),Object(s.useEffect)((function(){x(!0);var e=p&&p.filter((function(e){return e.id===+t}));o(e[0]);var c=v.filter((function(e){return e.postId===+t}));b(c),x(!1)}),[c,p,v,t]);var g=Object(s.useState)(1),S=Object(l.a)(g,2),w=S[0],P=S[1],k=Object(s.useState)(5),C=Object(l.a)(k,2),D=C[0],E=C[1],T=w*D,F=T-D,M=u.slice(F,T);return m?Object(n.jsx)(I,{}):Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row no-gutters align-items-center",children:[Object(n.jsx)("div",{className:"col-3",children:a?Object(n.jsx)($,{body:a.body,title:a.title}):Object(n.jsx)(I,{})}),Object(n.jsx)("div",{className:"col-9",children:u.length?Object(n.jsxs)("table",{className:"m-2",children:[Object(n.jsx)(W,{}),Object(n.jsxs)("tbody",{children:[M.map((function(e){var t=e.body,c=e.email,s=e.name,r=e.postId,i=e.id;return Object(n.jsx)(J,{body:t,email:c,name:s,postId:r,id:i,onDelete:function(){b((function(){return u.filter((function(e){return e.id!==i}))})),alert("Deleted Successfully")}},i)})),Object(n.jsx)(y,{postPerPage:D,totalPosts:u.length,paginate:function(e){P(e)},increasePosts:function(e){return E(D+ +e)},decreasePosts:function(e){return E(D-+e)}})]})]}):Object(n.jsx)(I,{})})]})}),Object(n.jsx)(Z,{postId:t,onCommentsSubmit:function(e){var t=u;console.log(t);var c=t.concat(e);console.log(c),b(c)}})]})}function te(){var e=Object(s.useState)(new URL(window.location.href).searchParams.get("id")),t=Object(l.a)(e,1)[0];return Object(n.jsxs)("div",{children:[Object(n.jsx)(R,{}),Object(n.jsx)(ee,{id:+t})]})}function ce(){var e=Object(N.b)();e(H()),e(function(){var e=Object(O.a)(b.a.mark((function e(t){var c,n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://jsonplaceholder.typicode.com/posts");case 3:if((c=e.sent).ok){e.next=6;break}throw new Error("Something went wrong!");case 6:return n=localStorage.getItem("userId"),e.next=9,c.json();case 9:s=e.sent,console.log(n),console.log(s.filter((function(e){return e.userId===n}))),t({type:z,posts:s,myPosts:s.filter((function(e){return e.userId===n}))}),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}());var t=Object(s.useState)(!1),c=Object(l.a)(t,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){i(!!k())}),[]),Object(n.jsx)(j.a,{children:Object(n.jsxs)(d.c,{children:[Object(n.jsx)(d.a,{path:"/",exact:!0,render:function(){return Object(n.jsx)(q,{isAuth:r})}}),Object(n.jsx)(d.a,{path:"/register",render:function(){return r?Object(n.jsx)("h1",{children:Object(n.jsx)(j.b,{to:"/dashboard",children:" Access Denied "})}):Object(n.jsx)(G,{})}}),Object(n.jsx)(d.a,{path:"/login",render:function(){return r?Object(n.jsx)("h1",{children:Object(n.jsx)(j.b,{to:"/dashboard",children:" Access Denied "})}):Object(n.jsx)(_,{})}}),Object(n.jsx)(d.a,{path:"/dashboard",render:function(){return r?Object(n.jsx)(X,{}):Object(n.jsx)("h1",{children:Object(n.jsx)(j.b,{to:"/login",children:" Access Denied Login First "})})}}),Object(n.jsx)(d.a,{path:"/post",render:function(){return r?Object(n.jsx)(te,{}):Object(n.jsx)("h1",{children:Object(n.jsx)(j.b,{to:"/login",children:" Access Denied Login First "})})}})]})})}var ne={userId:null,email:null,isAuth:!1},se={posts:[],comments:[],myPosts:[],myComments:[]},re=c(17),ie=c(28),ae=re.d,oe=Object(re.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:case F:return{userId:t.userId,email:t.email,isAuth:!!t.userId};case M:return ne;case A:return console.log("here in store",t),{userId:t.userId,email:t.email,isAuth:!!t.userId};default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(h.a)(Object(h.a)({},e),{},{posts:t.posts});case z:return Object(h.a)(Object(h.a)({},e),{},{posts:t.posts,myPosts:t.myPosts});case K:return Object(h.a)(Object(h.a)({},e),{},{comments:t.comments});default:return e}}}),le=Object(re.e)(oe,ae(Object(re.a)(ie.a)));a.a.render(Object(n.jsx)(N.a,{store:le,children:Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(ce,{})})}),document.getElementById("root")),o()}},[[44,1,2]]]);
//# sourceMappingURL=main.521bd776.chunk.js.map